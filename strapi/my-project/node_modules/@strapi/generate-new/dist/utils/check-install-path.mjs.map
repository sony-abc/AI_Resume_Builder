{"version":3,"file":"check-install-path.mjs","sources":["../../src/utils/check-install-path.ts"],"sourcesContent":["import { resolve } from 'node:path';\nimport chalk from 'chalk';\nimport fse from 'fs-extra';\nimport stopProcess from './stop-process';\n\n// Checks if the an empty directory exists at rootPath\nexport default async (directory: string): Promise<string> => {\n  if (!directory) {\n    stopProcess(`⛔️ Please provide a project name.`);\n  }\n\n  const rootPath = resolve(directory);\n\n  if (await fse.pathExists(rootPath)) {\n    const stat = await fse.stat(rootPath);\n\n    if (!stat.isDirectory()) {\n      stopProcess(\n        `⛔️ ${chalk.green(\n          rootPath\n        )} is not a directory. Make sure to create a Strapi application in an empty directory.`\n      );\n    }\n\n    const files = await fse.readdir(rootPath);\n    if (files.length > 1) {\n      stopProcess(\n        `⛔️ You can only create a Strapi app in an empty directory.\\nMake sure ${chalk.green(\n          rootPath\n        )} is empty.`\n      );\n    }\n  }\n\n  return rootPath;\n};\n"],"names":[],"mappings":";;;;AAMA,MAAe,mBAAA,OAAO,cAAuC;AAC3D,MAAI,CAAC,WAAW;AACd,gBAAY,mCAAmC;AAAA,EACjD;AAEM,QAAA,WAAW,QAAQ,SAAS;AAElC,MAAI,MAAM,IAAI,WAAW,QAAQ,GAAG;AAClC,UAAM,OAAO,MAAM,IAAI,KAAK,QAAQ;AAEhC,QAAA,CAAC,KAAK,eAAe;AACvB;AAAA,QACE,MAAM,MAAM;AAAA,UACV;AAAA,QACD,CAAA;AAAA,MAAA;AAAA,IAEL;AAEA,UAAM,QAAQ,MAAM,IAAI,QAAQ,QAAQ;AACpC,QAAA,MAAM,SAAS,GAAG;AACpB;AAAA,QACE;AAAA,YAAyE,MAAM;AAAA,UAC7E;AAAA,QACD,CAAA;AAAA,MAAA;AAAA,IAEL;AAAA,EACF;AAEO,SAAA;AACT;"}